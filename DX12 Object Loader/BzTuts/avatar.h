#pragma once

#include "stdafx.h"
#include "mesh.h"
#include "bone.h"
#include "animation.h"
#include "game_object.h"

#include <map>

//using namespace std;

class Mesh;
class Bone;
class Animation;

class Avatar {
public:
	//-------------------------------------------------------------------------
	//-------------------------------------------------------------------------
	//-------------------------------------------------------------------------
	// Member Variables
	//-------------------------------------------------------------------------
	//-------------------------------------------------------------------------
	//-------------------------------------------------------------------------


	vector<vector<Weight>> weights;

	vector<Mesh *> meshes;
	int numMeshes;

	vector<Bone *> bones;
	int numJoints;

	map<string, Animation *> anims;
	//-------------------------------------------------------------------------
	//-------------------------------------------------------------------------
	//-------------------------------------------------------------------------
	// Member Functions
	//-------------------------------------------------------------------------
	//-------------------------------------------------------------------------
	//-------------------------------------------------------------------------
	Avatar();
	virtual ~Avatar();

	virtual void Render();

	bool loadMD5Mesh(string filePath);
	bool loadMD5Anim(string filePath);

	void applyWeights();
};
